{"ast":null,"code":"var _jsxFileName = \"/Users/bryceschmisseur/Desktop/frontend-fire/src/pages/Dashboard.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport HeartSerivce from './../services/HeartRateService';\nimport SideBar from '../components/Navigation/SideBar';\nimport { makeStyles } from '@material-ui/core';\nimport Grid from '@material-ui/core/Grid';\nimport Cookies from 'universal-cookie';\nimport BPMCard from './../components/Dashboard/BPMCard';\nimport Table from './../components/Dashboard/Table';\nimport Graph from './../components/Dashboard/Graph';\nimport NoData from './../components/Dashboard/NoData';\nimport moment from 'moment';\nimport Heading from './../components/Dashboard/Heading';\nimport Footer from './../components/Navigation/Footer';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport SelectDates from './../components/Dashboard/SelectDates';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  content: {\n    paddingTop: '25px',\n    paddingRight: '25px',\n    paddingLeft: '110px',\n    '@media (min-width: 900px)': {\n      paddingLeft: '265px'\n    }\n  },\n  welcome: {\n    textAlign: 'left',\n    fontWeight: '300',\n    fontSize: '28px'\n  },\n  tableHeight: {\n    height: '100%',\n    '@media (min-width:1150px)': {\n      height: '78vh'\n    }\n  },\n  output: {\n    textAlign: 'left',\n    fontWeight: '100',\n    fontSize: '22px'\n  },\n  graphStyle: {\n    overflowX: 'unset',\n    overflowY: 'unset',\n    '@media (min-width:600px)': {\n      width: '100%',\n      minWidth: '465px',\n      overflowX: 'scroll',\n      overflowY: 'hidden'\n    }\n  }\n}));\n\nfunction createData(unNum, bpm, date) {\n  return {\n    unNum,\n    bpm,\n    date\n  };\n}\n\nconst Dashboard = () => {\n  _s();\n\n  const matchWidth = useMediaQuery('(min-width:1150px)');\n  const matchWidthSec = useMediaQuery('(min-width:600px)');\n  const classes = useStyles();\n  const cookies = new Cookies();\n  const curAppleId = cookies.get('currAppleId');\n  const displayName = cookies.get('displayName');\n  const [heartData, setHeartData] = useState([]);\n  const [rows, setRows] = useState([]);\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(10);\n  const [openNoData, setOpenNoData] = useState(false);\n  const [datesButtonDis, setDatesButtonDis] = useState(false);\n  const [openDate, setOpenDate] = useState(false);\n  const [avgRate, setAvgRate] = useState(0);\n  const [lastRec, setLastRec] = useState(0);\n  const [selectedDateFrom, setSelectedDateFrom] = useState(new Date());\n  const [selectedDateTo, setSelectedDateTo] = useState(new Date());\n  const [data, setData] = useState(JSON.parse(\"{}\"));\n  const [viewData, setViewData] = useState('full');\n  useEffect(() => {\n    HeartSerivce.getUsers(curAppleId).then(response => {\n      let arr = [];\n      Object.keys(response.data).forEach(function (key) {\n        let currDate = moment(response.data[key].date);\n        let HeartRate = {\n          bpm: response.data[key].bpm,\n          date: currDate,\n          user_id: response.data[key].userid\n        };\n        arr.push(HeartRate);\n      });\n      let arrTable = arr.reverse();\n      setLastRec(arrTable[0].bpm);\n\n      if (arrTable.length <= 0) {\n        setDatesButtonDis(true);\n        setOpenNoData(true);\n      } else {\n        setHeartData(arrTable);\n        let data = [];\n\n        for (let i = 0; i < arrTable.length; i++) {\n          data.push(createData(i, arrTable[i].bpm, arrTable[i].date.format('lll')));\n        }\n\n        setRows(data);\n        let chartdata = \"{\";\n        let currAveRate = 0;\n\n        for (let i = page * rowsPerPage; i < page * rowsPerPage + rowsPerPage; i++) {\n          if (i > arrTable.length - 1) {\n            chartdata = chartdata.substr(0, chartdata.length - 1);\n            break;\n          }\n\n          currAveRate += arrTable[i].bpm;\n          chartdata += '\"' + arrTable[i].date.format('MMM D h:m.s') + '\": ' + arrTable[i].bpm;\n\n          if (i !== page * rowsPerPage + rowsPerPage - 1) {\n            chartdata += \",\";\n          }\n        }\n\n        chartdata += \"}\";\n        setData(JSON.parse(chartdata));\n        setAvgRate(Math.round(currAveRate / rowsPerPage));\n      }\n    }); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n    generteGraphData(heartData, rows.length, rowsPerPage, newPage);\n  };\n\n  const handleChangeRowsPerPage = event => {\n    setRowsPerPage(+event.target.value);\n    setPage(0); //updateGraph(0, +event.target.value, heartData);\n\n    generteGraphData(heartData, rows.length, +event.target.value, page);\n  };\n\n  const handleCloseNoData = () => {\n    setOpenNoData(false);\n  };\n\n  const handleClickOpenDate = () => {\n    setOpenDate(true);\n  };\n\n  const handleCloseDate = () => {\n    let dateFrom = moment(selectedDateFrom);\n    let dateTo = moment(selectedDateTo);\n\n    if (dateFrom.isAfter(dateTo) || dateTo.isBefore(dateFrom)) {\n      alert(\"The date start must not be after the end date or the end date must not be before the start date!\");\n    } else {\n      let tableData = [];\n      let chartData = \"{\";\n      let heartRates = 0;\n      let numRates = 0;\n\n      for (let i = 0; i < heartData.length; i++) {\n        let currDate = heartData[i].date;\n\n        if (currDate.isAfter(dateFrom) && currDate.isBefore(dateTo)) {\n          heartRates += heartData[i].bpm;\n          numRates++;\n          tableData.push(createData(i, heartData[i].bpm, heartData[i].date.format('lll')));\n          chartData += '\"' + heartData[i].date.format('MMM D, YYYY h:m.s') + '\": ' + heartData[i].bpm + ',';\n        }\n      }\n\n      if (numRates > 0) {\n        setAvgRate(Math.round(heartRates / numRates));\n        chartData = chartData.substring(0, chartData.length - 1);\n        chartData += \"}\";\n        setRows(tableData);\n        setPage(0);\n        setRowsPerPage(-1);\n        setData(JSON.parse(chartData));\n      } else {\n        console.log(\"No data found between those dates\");\n      }\n    }\n  };\n\n  const handleDateChangeFrom = date => {\n    setSelectedDateFrom(date);\n  };\n\n  const handleDateChangeTo = date => {\n    setSelectedDateTo(date);\n  };\n\n  const handleReset = () => {\n    generteGraphData(heartData, heartData.length, rowsPerPage, page);\n  };\n\n  const handelRefresh = () => {\n    setViewData(\"full\");\n    HeartSerivce.getUsers(curAppleId).then(response => {\n      let arr = [];\n      Object.keys(response.data).forEach(function (key) {\n        let currDate = moment(response.data[key].date);\n        let HeartRate = {\n          bpm: response.data[key].bpm,\n          date: currDate,\n          user_id: response.data[key].userid\n        };\n        arr.push(HeartRate);\n      });\n      let arrTable = arr.reverse();\n      setLastRec(arrTable[0].bpm);\n\n      if (arrTable.length <= 0) {\n        setDatesButtonDis(true);\n        setOpenNoData(true);\n      } else {\n        setHeartData(arrTable);\n        let data = [];\n\n        for (let i = 0; i < arrTable.length; i++) {\n          data.push(createData(i, arrTable[i].bpm, arrTable[i].date.format('lll')));\n        }\n\n        setRows(data);\n        let chartdata = \"{\";\n        let currAveRate = 0;\n\n        for (let i = page * rowsPerPage; i < page * rowsPerPage + rowsPerPage; i++) {\n          if (i > arrTable.length - 1) {\n            chartdata = chartdata.substr(0, chartdata.length - 1);\n            break;\n          }\n\n          currAveRate += arrTable[i].bpm;\n          chartdata += '\"' + arrTable[i].date.format('MMM D h:m.s') + '\": ' + arrTable[i].bpm;\n\n          if (i !== page * rowsPerPage + rowsPerPage - 1) {\n            chartdata += \",\";\n          }\n        }\n\n        chartdata += \"}\";\n        setData(JSON.parse(chartdata));\n        setAvgRate(Math.round(currAveRate / rowsPerPage));\n      }\n    });\n  };\n\n  const handleTableClick = () => {\n    setViewData(\"table\");\n  };\n\n  const handleGraphClick = () => {\n    setViewData(\"graph\");\n  };\n\n  const generteGraphData = (tableData, length, numElements, page) => {\n    if (numElements !== -1) {\n      let chartdata = \"{\";\n      let currAveRate = 0;\n\n      for (let i = page * numElements; i < page * numElements + numElements; i++) {\n        if (i > tableData.length - 1) {\n          chartdata = chartdata.substr(0, chartdata.length - 1);\n          break;\n        }\n\n        currAveRate += tableData[i].bpm;\n        chartdata += '\"' + tableData[i].date.format('MMM D h:m.s') + '\": ' + tableData[i].bpm;\n\n        if (i !== page * numElements + numElements - 1) {\n          chartdata += \",\";\n        }\n      }\n\n      chartdata += \"}\";\n      setData(JSON.parse(chartdata));\n      setAvgRate(Math.round(currAveRate / numElements));\n    } else {\n      let chartdata = \"{\";\n      let currAveRate = 0;\n\n      for (let i = 0; i < length; i++) {\n        currAveRate += tableData[i].bpm;\n        chartdata += '\"' + tableData[i].date.format('MMM D h:m.s') + '\": ' + tableData[i].bpm;\n\n        if (i !== length - 1) {\n          chartdata += \",\";\n        }\n      }\n\n      chartdata += \"}\";\n      setData(JSON.parse(chartdata));\n      setAvgRate(Math.round(currAveRate / length));\n    }\n  };\n\n  var body = /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    children: [/*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      sm: matchWidth ? 6 : 12,\n      className: classes.tableHeight,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '10px',\n          height: '100%',\n          minHeight: '78vh'\n        },\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          rows: rows,\n          page: page,\n          rowsPerPage: rowsPerPage,\n          handleChangePage: handleChangePage,\n          handleChangeRowsPerPage: handleChangeRowsPerPage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      sm: matchWidth ? 6 : 12,\n      style: {\n        height: '78vh'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.graphStyle,\n        style: {\n          padding: '10px'\n        },\n        children: /*#__PURE__*/_jsxDEV(Graph, {\n          data: data\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          sm: matchWidthSec ? 6 : 12,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              paddingRight: '10px',\n              paddingLeft: '10px',\n              paddingTop: '10px',\n              width: '100%',\n              minHeight: '100%'\n            },\n            children: /*#__PURE__*/_jsxDEV(BPMCard, {\n              title: \"Average Heart Rate\",\n              bpm: avgRate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          sm: matchWidthSec ? 6 : 12,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              paddingRight: '10px',\n              paddingLeft: '10px',\n              paddingTop: '10px',\n              minHeight: '100%'\n            },\n            children: /*#__PURE__*/_jsxDEV(BPMCard, {\n              title: \"Last Recoded Heart Rate\",\n              bpm: lastRec\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 285,\n    columnNumber: 17\n  }, this);\n\n  if (viewData === \"table\") {\n    body = /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '15px',\n        height: '78vh',\n        width: '100%'\n      },\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        rows: rows,\n        page: page,\n        rowsPerPage: rowsPerPage,\n        handleChangePage: handleChangePage,\n        handleChangeRowsPerPage: handleChangeRowsPerPage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 17\n    }, this);\n  } else if (viewData === \"graph\") {\n    body = /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '15px',\n        height: '78vh',\n        width: '100%'\n      },\n      children: /*#__PURE__*/_jsxDEV(Graph, {\n        data: data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 17\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(NoData, {\n      displayName: displayName,\n      openNoData: openNoData,\n      setOpenNoData: setOpenNoData,\n      handleCloseNoData: handleCloseNoData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(SelectDates, {\n      openDate: openDate,\n      handleCloseDate: handleCloseDate,\n      selectedDateFrom: selectedDateFrom,\n      selectedDateTo: selectedDateTo,\n      handleDateChangeFrom: handleDateChangeFrom,\n      handleDateChangeTo: handleDateChangeTo,\n      handleReset: handleReset\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(SideBar, {\n      handleTableClick: handleTableClick,\n      handleGraphClick: handleGraphClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.content,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        children: [/*#__PURE__*/_jsxDEV(Heading, {\n          displayName: displayName,\n          datesButtonDis: datesButtonDis,\n          handleClickOpenDate: handleClickOpenDate,\n          handelRefresh: handelRefresh\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 21\n        }, this), body, /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 333,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Dashboard, \"PeDlngkDmYBL7+66aLp9AM4N46o=\", false, function () {\n  return [useMediaQuery, useMediaQuery, useStyles];\n});\n\n_c = Dashboard;\nexport default Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"sources":["/Users/bryceschmisseur/Desktop/frontend-fire/src/pages/Dashboard.js"],"names":["useState","useEffect","HeartSerivce","SideBar","makeStyles","Grid","Cookies","BPMCard","Table","Graph","NoData","moment","Heading","Footer","useMediaQuery","SelectDates","useStyles","theme","content","paddingTop","paddingRight","paddingLeft","welcome","textAlign","fontWeight","fontSize","tableHeight","height","output","graphStyle","overflowX","overflowY","width","minWidth","createData","unNum","bpm","date","Dashboard","matchWidth","matchWidthSec","classes","cookies","curAppleId","get","displayName","heartData","setHeartData","rows","setRows","page","setPage","rowsPerPage","setRowsPerPage","openNoData","setOpenNoData","datesButtonDis","setDatesButtonDis","openDate","setOpenDate","avgRate","setAvgRate","lastRec","setLastRec","selectedDateFrom","setSelectedDateFrom","Date","selectedDateTo","setSelectedDateTo","data","setData","JSON","parse","viewData","setViewData","getUsers","then","response","arr","Object","keys","forEach","key","currDate","HeartRate","user_id","userid","push","arrTable","reverse","length","i","format","chartdata","currAveRate","substr","Math","round","handleChangePage","event","newPage","generteGraphData","handleChangeRowsPerPage","target","value","handleCloseNoData","handleClickOpenDate","handleCloseDate","dateFrom","dateTo","isAfter","isBefore","alert","tableData","chartData","heartRates","numRates","substring","console","log","handleDateChangeFrom","handleDateChangeTo","handleReset","handelRefresh","handleTableClick","handleGraphClick","numElements","body","padding","minHeight"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport HeartSerivce from './../services/HeartRateService';\nimport SideBar from '../components/Navigation/SideBar';\nimport { makeStyles } from '@material-ui/core';\nimport Grid from '@material-ui/core/Grid';\nimport Cookies from 'universal-cookie';\nimport BPMCard from './../components/Dashboard/BPMCard';\nimport Table from './../components/Dashboard/Table';\nimport Graph from './../components/Dashboard/Graph';\nimport NoData from './../components/Dashboard/NoData';\nimport moment from 'moment';\nimport Heading from './../components/Dashboard/Heading';\nimport Footer from './../components/Navigation/Footer';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport SelectDates from './../components/Dashboard/SelectDates';\n\n\nconst useStyles = makeStyles((theme) => ({\n    content: {\n        paddingTop: '25px',\n        paddingRight: '25px',\n        paddingLeft: '110px',\n        '@media (min-width: 900px)': {\n            paddingLeft: '265px',\n          }, \n    },\n    welcome: {\n        textAlign: 'left',\n        fontWeight: '300',\n        fontSize: '28px'\n    },\n    tableHeight: {\n        height: '100%',\n        '@media (min-width:1150px)': {\n            height: '78vh'\n        },\n    },\n    output: {\n        textAlign: 'left',\n        fontWeight: '100',\n        fontSize: '22px'\n    },\n    graphStyle: {\n        overflowX: 'unset',\n        overflowY: 'unset',\n        '@media (min-width:600px)': {\n            width: '100%',\n            minWidth: '465px', \n            overflowX: 'scroll',\n            overflowY: 'hidden',\n        }, \n    }\n}));\n\nfunction createData(unNum, bpm, date) {\n    return {unNum, bpm, date };\n}\n\nconst Dashboard = () => {\n    const matchWidth = useMediaQuery('(min-width:1150px)');\n    const matchWidthSec = useMediaQuery('(min-width:600px)');\n\n    const classes = useStyles();\n    const cookies = new Cookies();\n    const curAppleId = cookies.get('currAppleId');\n    const displayName = cookies.get('displayName');\n    const [heartData, setHeartData] = useState([]);\n    const [rows, setRows] = useState([]);\n    const [page, setPage] = useState(0);\n    const [rowsPerPage, setRowsPerPage] = useState(10);\n    const [openNoData, setOpenNoData] = useState(false);\n    const [datesButtonDis, setDatesButtonDis] = useState(false);\n    const [openDate, setOpenDate] = useState(false);\n    const [avgRate, setAvgRate] = useState(0);\n    const [lastRec, setLastRec] = useState(0);\n    const [selectedDateFrom, setSelectedDateFrom] = useState(new Date());\n    const [selectedDateTo, setSelectedDateTo] = useState(new Date());\n    const [data, setData] = useState(JSON.parse(\"{}\"));\n    const [viewData, setViewData] = useState('full')\n\n\n    useEffect(() => {\n        HeartSerivce.getUsers(curAppleId).then(response => {\n            let arr = [];\n            Object.keys(response.data).forEach(function(key) {\n                let currDate = moment(response.data[key].date);\n                let HeartRate = {\n                    bpm: response.data[key].bpm,\n                    date: currDate,\n                    user_id: response.data[key].userid\n                }\n                arr.push(HeartRate);\n            });\n            let arrTable = arr.reverse();\n            setLastRec(arrTable[0].bpm);\n            if(arrTable.length <= 0)\n            {\n                setDatesButtonDis(true);\n                setOpenNoData(true);\n            } else {\n                setHeartData(arrTable);\n                let data = [];\n                for(let i = 0; i < arrTable.length; i++){\n                    data.push(createData(i, arrTable[i].bpm, arrTable[i].date.format('lll')));\n                }\n                setRows(data);\n                let chartdata = \"{\";\n                let currAveRate = 0;\n                for(let i = ((page * rowsPerPage)); i < ((page * rowsPerPage) + rowsPerPage); i++){\n                    if(i > arrTable.length - 1)\n                    {\n                        chartdata = chartdata.substr(0, chartdata.length -1);\n                        break; \n                    }\n                    currAveRate += arrTable[i].bpm;\n                    chartdata += '\"' + arrTable[i].date.format('MMM D h:m.s') + '\": ' + arrTable[i].bpm;\n                    if(i !== ((page * rowsPerPage) + rowsPerPage) - 1){\n                        chartdata += \",\";\n                    }\n                }\n                chartdata += \"}\"\n                setData(JSON.parse(chartdata));\n                setAvgRate(Math.round(currAveRate / rowsPerPage));\n            }\n        })\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    const handleChangePage = (event, newPage) => {\n        setPage(newPage);\n        generteGraphData(heartData, rows.length, rowsPerPage, newPage);\n    };\n\n    const handleChangeRowsPerPage = (event) => {\n        setRowsPerPage(+event.target.value);\n        setPage(0);\n        //updateGraph(0, +event.target.value, heartData);\n        generteGraphData(heartData, rows.length, +event.target.value, page);\n    };\n\n    const handleCloseNoData = () => {\n        setOpenNoData(false);\n    };\n\n    const handleClickOpenDate = () => {\n        setOpenDate(true);\n    };\n\n    const handleCloseDate = () => {\n        let dateFrom = moment(selectedDateFrom);\n        let dateTo = moment(selectedDateTo);\n        if(dateFrom.isAfter(dateTo) || dateTo.isBefore(dateFrom)){\n            alert(\"The date start must not be after the end date or the end date must not be before the start date!\");\n        } else {\n            let tableData = [];\n            let chartData = \"{\";\n            let heartRates = 0;\n            let numRates = 0;\n            for(let i = 0; i < heartData.length; i++){\n                let currDate = heartData[i].date;\n                if(currDate.isAfter(dateFrom) && currDate.isBefore(dateTo)){\n                    heartRates += heartData[i].bpm;\n                    numRates++;\n                    tableData.push(createData(i, heartData[i].bpm, heartData[i].date.format('lll')));\n                    chartData += '\"' + heartData[i].date.format('MMM D, YYYY h:m.s') + '\": ' + heartData[i].bpm + ',';\n                }\n            }\n            if (numRates > 0) {\n                setAvgRate(Math.round(heartRates / numRates))\n                chartData = chartData.substring(0, chartData.length - 1)\n                chartData += \"}\"\n                setRows(tableData);\n                setPage(0);\n                setRowsPerPage(-1);\n                setData(JSON.parse(chartData));\n            } else {\n                console.log(\"No data found between those dates\");\n            }\n        }\n    };\n\n    const handleDateChangeFrom = (date) => {\n        setSelectedDateFrom(date);\n    };\n\n    const handleDateChangeTo = (date) => {\n        setSelectedDateTo(date);\n    };\n\n    const handleReset = () => {\n        generteGraphData(heartData, heartData.length, rowsPerPage, page);\n    }\n\n    const handelRefresh = () => {\n        setViewData(\"full\")\n        HeartSerivce.getUsers(curAppleId).then(response => {\n            let arr = [];\n            Object.keys(response.data).forEach(function(key) {\n                let currDate = moment(response.data[key].date);\n                let HeartRate = {\n                    bpm: response.data[key].bpm,\n                    date: currDate,\n                    user_id: response.data[key].userid\n                }\n                arr.push(HeartRate);\n            });\n            let arrTable = arr.reverse();\n            setLastRec(arrTable[0].bpm);\n            if(arrTable.length <= 0)\n            {\n                setDatesButtonDis(true);\n                setOpenNoData(true);\n            } else {\n                setHeartData(arrTable);\n                let data = [];\n                for(let i = 0; i < arrTable.length; i++){\n                    data.push(createData(i, arrTable[i].bpm, arrTable[i].date.format('lll')));\n                }\n                setRows(data);\n                let chartdata = \"{\";\n                let currAveRate = 0;\n                for(let i = ((page * rowsPerPage)); i < ((page * rowsPerPage) + rowsPerPage); i++){\n                    if(i > arrTable.length - 1)\n                    {\n                        chartdata = chartdata.substr(0, chartdata.length -1);\n                        break; \n                    }\n                    currAveRate += arrTable[i].bpm;\n                    chartdata += '\"' + arrTable[i].date.format('MMM D h:m.s') + '\": ' + arrTable[i].bpm;\n                    if(i !== ((page * rowsPerPage) + rowsPerPage) - 1){\n                        chartdata += \",\";\n                    }\n                }\n                chartdata += \"}\"\n                setData(JSON.parse(chartdata));\n                setAvgRate(Math.round(currAveRate / rowsPerPage));\n            }\n        })\n    }\n\n    const handleTableClick = () => {\n        setViewData(\"table\");\n    }\n\n    const handleGraphClick = () => {\n        setViewData(\"graph\");\n    }\n\n    const generteGraphData = (tableData, length, numElements, page) => {\n        if(numElements !== -1)\n        {\n            let chartdata = \"{\";\n            let currAveRate = 0;\n            for(let i = ((page * numElements)); i < ((page * numElements) + numElements); i++){\n                if(i > tableData.length - 1)\n                {\n                    chartdata = chartdata.substr(0, chartdata.length -1);\n                    break; \n                }\n                currAveRate += tableData[i].bpm;\n                chartdata += '\"' + tableData[i].date.format('MMM D h:m.s') + '\": ' + tableData[i].bpm;\n                if(i !== ((page * numElements) + numElements) - 1){\n                    chartdata += \",\";\n                }\n            }\n            chartdata += \"}\"\n            setData(JSON.parse(chartdata));\n            setAvgRate(Math.round(currAveRate / numElements));\n        } else {\n            let chartdata = \"{\";\n            let currAveRate = 0;\n            for(let i = 0; i < length; i++){\n                currAveRate += tableData[i].bpm;\n                chartdata += '\"' + tableData[i].date.format('MMM D h:m.s') + '\": ' + tableData[i].bpm;\n                if(i !== length - 1){\n                    chartdata += \",\";\n                }\n            }\n            chartdata += \"}\"\n            setData(JSON.parse(chartdata));\n            setAvgRate(Math.round(currAveRate / length));\n        }\n    }\n\n    var body =  <Grid container>\n                    <Grid item sm={matchWidth ? 6 : 12} className={classes.tableHeight}>\n                    <div style={{padding: '10px', height: '100%', minHeight: '78vh'}}>\n                        <Table \n                            rows={rows}\n                            page={page}\n                            rowsPerPage={rowsPerPage}\n                            handleChangePage={handleChangePage}\n                            handleChangeRowsPerPage={handleChangeRowsPerPage}\n                        />\n                    </div>\n                </Grid>\n                <Grid item sm={matchWidth ? 6 : 12} style={{height: '78vh'}}>\n                    <div className={classes.graphStyle} style={{padding: '10px'}} >\n                        <Graph data={data}/>\n                    </div>\n                    <Grid container>\n                        <Grid item sm={matchWidthSec ? 6 : 12} >\n                            <div style={{paddingRight: '10px', paddingLeft: '10px', paddingTop: '10px', width: '100%', minHeight: '100%'}}>\n                                <BPMCard title={\"Average Heart Rate\"} bpm={avgRate}/>\n                            </div>\n                        </Grid>\n                        <Grid item sm={matchWidthSec ? 6 : 12}>\n                            <div style={{paddingRight: '10px', paddingLeft: '10px', paddingTop: '10px', minHeight: '100%'}}>\n                                <BPMCard title={\"Last Recoded Heart Rate\"} bpm={lastRec}/>\n                            </div>\n                        </Grid>\n                    </Grid>\n                </Grid>\n            </Grid>;\n\n    if(viewData === \"table\"){\n        body =  <div style={{padding: '15px', height: '78vh', width: '100%'}}>\n                    <Table \n                        rows={rows}\n                        page={page}\n                        rowsPerPage={rowsPerPage}\n                        handleChangePage={handleChangePage}\n                        handleChangeRowsPerPage={handleChangeRowsPerPage}\n                    />\n                </div>\n    } else if (viewData === \"graph\"){\n        body =  <div style={{padding: '15px', height: '78vh', width: '100%'}}>\n                    <Graph data={data}/> \n                </div>\n    }\n\n    return (\n        <div>\n            <NoData \n                displayName={displayName}\n                openNoData={openNoData}\n                setOpenNoData={setOpenNoData}\n                handleCloseNoData={handleCloseNoData}\n            />\n            <SelectDates\n                openDate={openDate}\n                handleCloseDate={handleCloseDate}\n                selectedDateFrom={selectedDateFrom}\n                selectedDateTo= {selectedDateTo}\n                handleDateChangeFrom={handleDateChangeFrom}\n                handleDateChangeTo={handleDateChangeTo}\n                handleReset={handleReset}\n            />\n            <SideBar \n                handleTableClick={handleTableClick}\n                handleGraphClick={handleGraphClick}\n            />\n            <div className={classes.content}>\n                <Grid>\n                    <Heading \n                        displayName={displayName}\n                        datesButtonDis={datesButtonDis}\n                        handleClickOpenDate={handleClickOpenDate}\n                        handelRefresh={handelRefresh}\n                    />\n                    {body}\n                    <Footer/>\n                </Grid>\n            </div>\n        </div>\n    )\n}\n\nexport default Dashboard\n"]},"metadata":{},"sourceType":"module"}